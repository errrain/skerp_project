{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}

<h4>RACK MASTER 등록/수정</h4>

<form method="post" enctype="multipart/form-data" novalidate>
    {% csrf_token %}
    <div class="row">
        <!-- 왼쪽: 필드 입력 -->
        <div class="col-md-8">
            <div class="row mb-2">
                <div class="col-md-6">
                    <label class="form-label">품명</label>
                    {{ form.product_nm|add_class:"form-control form-control-sm" }}
                </div>
                <div class="col-md-6">
                    <label class="form-label">품번</label>
                    {{ form.product_no|add_class:"form-control form-control-sm" }}
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-6">
                    <label class="form-label">제작처</label>
                    {{ form.make_comp|add_class:"form-control form-control-sm" }}
                </div>
                <div class="col-md-6">
                    <label class="form-label">연결수량</label>
                    {{ form.con_num|add_class:"form-control form-control-sm" }}
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-6">
                    <label class="form-label">최대 사용 수량</label>
                    {{ form.max_count|add_class:"form-control form-control-sm" }}
                </div>
                <div class="col-md-6">
                    <label class="form-label">사용 여부</label>
                    {{ form.use_yn|add_class:"form-select form-select-sm" }}
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">삭제 여부</label>
                    {{ form.dlt_yn|add_class:"form-select form-select-sm" }}
                </div>
            </div>
        </div>

        <!-- 오른쪽: 이미지 업로드 -->
        <div class="col-md-4 text-center">
            <label class="form-label">RACK 이미지</label><br>
            {% if form.instance.image %}
                <img src="{{ form.instance.image.url }}" class="img-thumbnail mb-2" style="width: 200px;">
            {% else %}
                <div class="border bg-light mb-2" style="width: 200px; height: 150px; line-height: 150px;">
                    <span class="text-muted">미리보기 없음</span>
                </div>
            {% endif %}
            {{ form.image|add_class:"form-control form-control-sm" }}
        </div>
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-sm btn-success">저장</button>
        <a href="{% url 'rack:rack_master_list' %}" class="btn btn-sm btn-secondary">← 목록</a>
    </div>
</form>

{% endblock %}
