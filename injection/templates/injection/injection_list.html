{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3" style="font-size: 0.9rem;">
    <h4 class="mb-0">ì‚¬ì¶œí’ˆ ëª©ë¡</h4>
    <a href="{% url 'injection:injection_create' %}" class="btn btn-sm btn-success">+ ë“±ë¡</a>
</div>

<!-- ğŸ” ê²€ìƒ‰ ì¡°ê±´ -->
<form method="get" class="row g-2 mb-3 align-items-center">
  <div class="col-auto">
    <input type="text" name="name" value="{{ request.GET.name }}" class="form-control form-control-sm" placeholder="í’ˆëª…">
  </div>
  <div class="col-auto">
    <input type="text" name="program_name" value="{{ request.GET.program_name }}" class="form-control form-control-sm" placeholder="í”„ë¡œê·¸ë¨ëª…">
  </div>
  <div class="col-auto">
    <select name="status" class="form-select form-select-sm">
      <option value="">ìƒíƒœ ì „ì²´</option>
      <option value="ê°œë°œ" {% if request.GET.status == "ê°œë°œ" %}selected{% endif %}>ê°œë°œ</option>
      <option value="ì–‘ì‚°" {% if request.GET.status == "ì–‘ì‚°" %}selected{% endif %}>ì–‘ì‚°</option>
      <option value="ì„œë¹„ìŠ¤" {% if request.GET.status == "ì„œë¹„ìŠ¤" %}selected{% endif %}>ì„œë¹„ìŠ¤</option>
      <option value="ë‹¨ì¢…" {% if request.GET.status == "ë‹¨ì¢…" %}selected{% endif %}>ë‹¨ì¢…</option>
    </select>
  </div>
  <div class="col-auto">
    <input type="text" name="alias" value="{{ request.GET.alias }}" class="form-control form-control-sm" placeholder="ë³„ì¹­">
  </div>
  <div class="col-auto">
    <input type="text" name="vendor" value="{{ request.GET.vendor }}" class="form-control form-control-sm" placeholder="ì‚¬ì¶œì‚¬">
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-sm btn-primary">ê²€ìƒ‰</button>
  </div>
</form>

<!-- ğŸ“‹ ëª©ë¡ í…Œì´ë¸” -->
<table class="table table-sm table-bordered table-striped text-center align-middle" style="font-size: 12px; border: 1px solid #000000;">
  <thead class="table-dark">
    <tr>
      <th>ë²ˆí˜¸</th>
      <th>í’ˆëª…</th>
      <th>ì´ë¯¸ì§€</th>
      <th>í”„ë¡œê·¸ë¨ëª…</th>
      <th>ìƒíƒœ</th>
      <th>ë³„ì¹­</th>
      <th>Part No.</th>
      <th>Weight(g)</th>
      <th>ì‚¬ì¶œì‚¬</th>
      <th>ì‚¬ìš©</th>
      <th>ì‚­ì œ</th>
      <th class="fw-bold table-header">ìˆ˜ì •</th>
      <th class="fw-bold table-header">ì‚­ì œ</th>
    </tr>
  </thead>
  <tbody>
    {% for obj in page_obj %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ obj.name }}</td>
      <td>
        {% if obj.image %}
          <img src="{{ obj.image.url }}" width="60" height="60" class="img-thumbnail">
        {% else %}
          <span class="text-muted small">ì—†ìŒ</span>
        {% endif %}
      </td>
      <td>{{ obj.program_name }}</td>
      <td>{{ obj.get_status_display }}</td>
      <td>{{ obj.alias }}</td>
      <td>{{ obj.part_number }}</td>
      <td>{{ obj.weight }}</td>
      <td>{{ obj.vendor.name }}</td>
      <td>{{ obj.get_use_yn_display }}</td>
      <td>{{ obj.get_delete_yn_display }}</td>
      <td>
        <a href="{% url 'injection:injection_update' obj.pk %}" class="btn btn-sm btn-warning">ìˆ˜ì •</a>
      </td>
      <td>
        <a href="{% url 'injection:injection_delete' obj.pk %}" class="btn btn-sm btn-danger"
           onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ì‚­ì œ</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="12" class="text-center">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- ğŸ“Œ í˜ì´ì§• -->
<nav aria-label="Page navigation">
  <ul class="pagination pagination-sm justify-content-center">
    {% if page_obj.has_previous %}
    <li class="page-item">
      <a class="page-link" href="?page={{ page_obj.previous_page_number }}&{{ request.GET.urlencode }}">ì´ì „</a>
    </li>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
    <li class="page-item {% if num == page_obj.number %}active{% endif %}">
      <a class="page-link" href="?page={{ num }}&{{ request.GET.urlencode }}">{{ num }}</a>
    </li>
    {% endfor %}
    {% if page_obj.has_next %}
    <li class="page-item">
      <a class="page-link" href="?page={{ page_obj.next_page_number }}&{{ request.GET.urlencode }}">ë‹¤ìŒ</a>
    </li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
